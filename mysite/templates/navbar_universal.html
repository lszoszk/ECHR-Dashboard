{# templates/navbar_universal.html #}

<!-- Minimal navbar-specific styles (compatible with your page CSS variables) -->
<style>
  :root {
    --primary-color: #009edb;
    --card-background: #fcfcfc;
    --border-color: #e2e8f0;
    --text-secondary: #2d3748;
  }
  body.dark-mode {
    --primary-color: #4299e1;
    --border-color: #4a5568;
    --text-secondary: #e2e8f0;
  }
  .navbar {
    background: var(--card-background) !important;
    border-bottom: 1px solid var(--border-color);
    box-shadow: 0 1px 3px rgba(0,0,0,0.08);
  }
  .navbar-brand { color: var(--primary-color) !important; font-weight: 600; }
  .navbar-nav .nav-link { color: var(--text-secondary) !important; font-weight: 500; }
  .navbar-nav .nav-link:hover { color: var(--primary-color) !important; }
  .navbar-toggler { border: none; }
  .navbar-toggler:focus { outline: none; box-shadow: none; }
  .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%2833, 37, 41, 0.75%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
    width: 1.5rem; height: 1.5rem;
  }
  body.dark-mode .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 0.85%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
  }

/* ≥1200px: włącz sticky */
@media (min-width: 1200px) {
  .navbar.sticky-top {
    position: sticky !important;
    top: 0;
    z-index: 1040;
  }

</style>

<nav class="navbar navbar-expand-lg sticky-top">
  <div class="container-fluid">

    <!-- Brand -->
    <a class="navbar-brand" href="{{ url_for('index') }}">
      <i class="fas fa-balance-scale mr-2"></i>
      UN Treaty Body Database
    </a>

    <!-- Toggler (Bootstrap 4.5) -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Links -->
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">

        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('index') }}">
            <i class="fas fa-home mr-1"></i> Home
          </a>
        </li>

        <!-- Optional: quick links to enhanced pages you exposed -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="enhancedMenu" role="button"
             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            General Comments
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="enhancedMenu">
            <a class="dropdown-item" href="{{ url_for('index') }}">Search</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="{{ url_for('corpus_viewer') }}">Full text</a>
          </div>
        </li>

        <!-- Optional: quick links to enhanced pages you exposed -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="enhancedMenu" role="button"
             data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Special Procedures
          </a>
          <div class="dropdown-menu dropdown-menu-right" aria-labelledby="enhancedMenu">
          <a class="nav-link" href="{{ url_for('specialprocedures') }}">Search</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="https://lszoszk.pythonanywhere.com/documents">Full text</a>
          </div>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://lszoszk.pythonanywhere.com/about">
            About
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link" href="https://lszoszk.github.io/" target="_blank" rel="noopener">
            Contact
          </a>
        </li>

        <!-- Dark mode toggle -->
        <li class="nav-item">
          <a id="dark-mode-toggle" class="nav-link" href="#" title="Toggle Dark Mode">
            <i class="fas fa-moon"></i>
          </a>
        </li>

      </ul>
    </div>
  </div>
</nav>

<script>
  // Dark mode persistence + toggle
  (function () {
    const toggle = document.getElementById('dark-mode-toggle');
    if (!toggle) return;
    const icon = toggle.querySelector('i');

    // Load saved preference
    if (localStorage.getItem('darkMode') === 'true') {
      document.body.classList.add('dark-mode');
      if (icon) icon.className = 'fas fa-sun';
    }

    toggle.addEventListener('click', function (e) {
      e.preventDefault();
      document.body.classList.toggle('dark-mode');
      const isDark = document.body.classList.contains('dark-mode');
      localStorage.setItem('darkMode', isDark ? 'true' : 'false');
      if (icon) icon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
    });
  })();
</script>
