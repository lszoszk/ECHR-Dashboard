<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>UN Treaty Body Database - Enhanced Design | General Comments & Recommendations</title>

    <!-- Favicon & Analytics -->
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="/static/js/cookies.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VFCDZ89GWR"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-VFCDZ89GWR', { 'cookie_domain': 'auto' });
    </script>

    <!-- Bootstrap, Icons & Fonts -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Unified Design System -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/unified-design-system.css') }}?v=1">
</head>
<style>
    /* Ensure search button matches the height of the large input */
.search-input-group .input-group-append .btn {
    height: 100%;
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
}

</style>
<body class="d-flex flex-column min-vh-100">

    <!-- Skip Navigation Link -->
    <a class="sr-only sr-only-focusable" href="#main-content">Skip to main content</a>

    {% include 'navbar_universal.html' %}

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title">
                UN Treaty Body Database
            </h1>
            <p class="hero-subtitle">
                Search General Comments & Recommendations
            </p>
            <p class="hero-description">
                Comprehensive database of UN Treaty Body General Comments and Recommendations with advanced search capabilities for human rights researchers, academics, and legal professionals.
            </p>
        </div>
    </section>

    <!-- Main Search Section -->
    <main id="main-content" class="flex-grow-1" tabindex="-1">
        <div class="container">
            <!-- Search Container -->
            <div class="search-container">
                <form id="searchForm" action="/search" method="get">

                    <!-- Main Search Input -->
                    <div class="search-input-group">
                        <div class="input-group">
                            <label for="main-search" class="sr-only">Search General Comments and Recommendations</label>
                            <input type="text"
                                   id="main-search"
                                   name="search_query"
                                   class="form-control form-control-lg"
                                   placeholder="Search General Comments and Recommendations..."
                                   value="{{ request.args.get('search_query', '') }}"
                                   aria-describedby="search-help">
                            <div class="input-group-append">
                                <button class="btn search-btn btn-lg" type="submit" id="searchButton">
                                    <i class="fas fa-search mr-2"></i>Search
                                </button>
                            </div>
                        </div>
                        <small id="search-help" class="form-text text-muted">
                            <i class="fas fa-info-circle mr-1" aria-hidden="true"></i>
                            For multi-word phrases, use quotation marks, e.g. "human rights"
                        </small>
                    </div>

                    <!-- Advanced Search Toggle -->
                    <div class="text-center mb-4">
                        <a class="advanced-search-toggle text-primary font-weight-medium text-decoration-none"
                           data-toggle="collapse"
                           href="#advancedFilters"
                           role="button"
                           aria-expanded="false"
                           aria-controls="advancedFilters"
                           id="advancedToggle"
                           aria-describedby="advanced-help">
                            <i class="fas fa-sliders-h mr-2" id="advancedIcon"></i>
                            Advanced Search
                        </a>
                        <div id="advanced-help" class="sr-only">Press Enter or Space to toggle advanced search filters</div>
                    </div>

                    <!-- Advanced Filters (Collapsible) -->
                    <div class="collapse" id="advancedFilters">
                        <div class="filter-section advanced-search-section bright-container">
                            <div class="row">

                                <!-- Concerned Groups -->
                                <div class="col-lg-8">
                                    <div class="filter-group">
                                        <div class="filter-title">
                                            <i class="fas fa-users"></i>
                                            Concerned Persons/Groups
                                        </div>
                                        <div class="checkbox-grid-two-col">
                                            {% for label in [
                                                'Adolescents', 'Children', 'Children in alternative care',
                                                'Indigenous peoples', 'Internally displaced persons',
                                                'LGBT+ persons', 'Migrants', 'Non-citizens & stateless',
                                                'Persons affected by armed conflict',
                                                'Persons affected by natural disasters',
                                                'Persons deprived of their liberty',
                                                'Persons in street situations',
                                                'Persons living in poverty',
                                                'Persons living in rural/remote areas',
                                                'Persons living with HIV/AIDS',
                                                'Persons with disabilities',
                                                'Roma, Gypsies, Sinti & Travellers',
                                                'Refugees & asylum-seekers', 'Women/girls'
                                            ] %}
                                                <div class="form-check">
                                                    <input class="form-check-input"
                                                           type="checkbox"
                                                           id="label_{{ loop.index }}"
                                                           name="labels[]"
                                                           value="{{ label }}"
                                                           {% if label in request.args.getlist('labels[]') %}checked{% endif %}>
                                                    <label class="form-check-label" for="label_{{ loop.index }}">
                                                        {{ label }}
                                                    </label>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>

                                <!-- Treaty Bodies -->
                                <div class="col-lg-4">
                                    <div class="filter-group">
                                        <div class="filter-title">
                                            <i class="fas fa-gavel"></i>
                                            Treaty Bodies
                                        </div>
                                        <div class="bg-white p-3 rounded border">
                                            {% for tb in ['CCPR', 'CEDAW', 'CESCR', 'CRC', 'CRPD', 'CERD', 'CAT', 'CMW', 'CED'] %}
                                                <div class="form-check">
                                                    <input class="form-check-input"
                                                           type="checkbox"
                                                           id="tb_{{ loop.index }}"
                                                           name="treatyBodies[]"
                                                           value="{{ tb }}"
                                                           {% if tb in request.args.getlist('treatyBodies[]') %}checked{% endif %}>
                                                    <label class="form-check-label" for="tb_{{ loop.index }}">
                                                        {{ tb }}
                                                    </label>
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>


        </div>
    </main>

    <!-- Features Section -->
    <section class="features-section" aria-labelledby="features-heading">
        <div class="container">
            <h2 id="features-heading" class="sr-only">Application Features</h2>
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon" aria-hidden="true">
                            <i class="fas fa-search"></i>
                        </div>
                        <h3>Advanced Search</h3>
                        <p>Powerful search capabilities with phrase matching, and comprehensive filtering by concerned groups and treaty bodies.</p>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon" aria-hidden="true">
                            <i class="fas fa-balance-scale"></i>
                        </div>
                        <h3>Comprehensive Coverage</h3>
                        <p>Complete database of General Comments and Recommendations from all UN Treaty Bodies with regular updates.</p>
                    </div>
                </div>
                <div class="col-lg-4 mb-4">
                    <div class="feature-card">
                        <div class="feature-icon" aria-hidden="true">
                            <i class="fas fa-download"></i>
                        </div>
                        <h3>Export & Analysis</h3>
                        <p>Export search results to Excel and access enhanced analytics for in-depth research analysis.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Recent Developments Section -->
    <section class="recent-developments-section" aria-labelledby="recent-developments-heading">
        <div class="container">
            <h2 id="recent-developments-heading" class="developments-title">
                <i class="fas fa-clock mr-2"></i>
                Recent Developments
            </h2>
            <p class="developments-subtitle">
                Latest General Comments & Recommendations
            </p>

            <div class="developments-scroll-container" id="recentDevelopments">
                <!-- Content will be loaded by JavaScript -->
            </div>

            <div class="text-center mt-3">
                <small class="text-muted">
                    <i class="fas fa-external-link-alt mr-1"></i>
                    Click on any document to view the official UN document
                </small>
            </div>
        </div>
    </section>

    <style>
    /* Recent Developments Section - Updated styling to match design system */
    .recent-developments-section {
        background: var(--secondary-color);
        padding: var(--spacing-2xl) 0;
        margin-bottom: var(--spacing-lg);
    }

    .developments-title {
        font-size: var(--font-size-3xl);
        font-weight: 600;
        color: var(--primary-color);
        text-align: center;
        margin-bottom: var(--spacing-sm);
    }

    .developments-subtitle {
        text-align: center;
        color: var(--text-muted);
        margin-bottom: var(--spacing-xl);
        font-size: var(--font-size-lg);
    }

    .developments-scroll-container {
        height: 400px;
        overflow-y: auto;
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        padding: var(--spacing-md);
        background-color: var(--card-background);
        box-shadow: var(--shadow-sm);
        -webkit-overflow-scrolling: touch; /* momentum scrolling on iOS */
    }

    .development-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-sm) 0;
        border-bottom: 1px solid var(--border-light);
        transition: all 0.2s ease;
        cursor: pointer;
        text-decoration: none;
        color: inherit;
        /* FIX: ensure items are visible (remove broken slideInUp/opacity:0) */
        opacity: 1;
    }

    .development-item:last-child {
        border-bottom: none;
    }

    .development-item:hover {
        background-color: var(--primary-light);
        border-radius: var(--radius-sm);
        margin: 0 calc(-1 * var(--spacing-sm));
        padding-left: var(--spacing-md);
        padding-right: var(--spacing-md);
        text-decoration: none;
        color: inherit;
        transform: translateY(-1px);
        box-shadow: 0 2px 8px rgba(0, 158, 219, 0.1);
    }

    .development-item:hover .development-text {
        color: var(--primary-color);
    }

    .treaty-badge {
        background: linear-gradient(45deg, var(--primary-color), var(--accent-color));
        color: white;
        padding: var(--spacing-xs) var(--spacing-sm);
        border-radius: var(--radius-sm);
        font-size: var(--font-size-xs);
        font-weight: 600;
        min-width: 60px;
        text-align: center;
        margin-right: var(--spacing-md);
        flex-shrink: 0;
    }

    .development-text {
        flex-grow: 1;
        color: var(--text-secondary);
        font-size: var(--font-size-sm);
        line-height: 1.4;
    }

    .adoption-date {
        color: var(--text-muted);
        font-size: var(--font-size-xs);
        margin-left: var(--spacing-md);
        flex-shrink: 0;
        font-weight: 500;
    }

    /* Dark mode adjustments */
    body.dark-mode .developments-scroll-container {
        border-color: var(--border-color);
        background-color: var(--card-background);
    }

    body.dark-mode .development-item:hover {
        background-color: var(--primary-light);
    }

    /* Scrollbar styling to match design system */
    .developments-scroll-container::-webkit-scrollbar {
        width: 8px;
    }

    .developments-scroll-container::-webkit-scrollbar-track {
        background: var(--secondary-color);
        border-radius: 4px;
    }

    .developments-scroll-container::-webkit-scrollbar-thumb {
        background: var(--border-color);
        border-radius: 4px;
        transition: background 0.3s ease;
    }

    .developments-scroll-container::-webkit-scrollbar-thumb:hover {
        background: var(--text-muted);
    }

    /* ========== ADVANCED SEARCH TOGGLE SIMPLE STYLING ========== */
    .advanced-search-toggle {
        color: var(--primary-color) !important;
        text-decoration: none !important;
        font-weight: 600;
        transition: color 0.3s ease;
        display: inline-flex;
        align-items: center;
    }

    .advanced-search-toggle:hover {
        color: var(--accent-color) !important;
        text-decoration: none !important;
    }

    body.dark-mode .advanced-search-toggle {
        color: var(--primary-color) !important;
    }

    body.dark-mode .advanced-search-toggle:hover {
        color: var(--accent-color) !important;
    }


    /* ========== BRIGHT CONTAINER FOR ADVANCED SEARCH ========== */
    .bright-container {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(247, 250, 252, 0.95)) !important;
        border: 1px solid var(--border-light) !important;
        box-shadow: 0 8px 32px rgba(0, 158, 219, 0.08) !important;
        backdrop-filter: blur(10px);
    }

    body.dark-mode .bright-container {
        background: linear-gradient(135deg, rgba(45, 55, 72, 0.98), rgba(26, 32, 44, 0.95)) !important;
        border: 1px solid var(--border-color) !important;
        box-shadow: 0 8px 32px rgba(66, 153, 225, 0.1) !important;
    }

    .bright-container .filter-title {
        color: var(--text-primary) !important;
        font-weight: 600;
    }

    .bright-container .bg-white {
        background: var(--card-background) !important;
        border: 1px solid var(--border-light) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .bright-container .bg-white {
        background: var(--card-background) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    .bright-container .checkbox-grid-two-col {
        background: var(--card-background) !important;
        border: 1px solid var(--border-light) !important;
        color: var(--text-primary) !important;
    }

    body.dark-mode .bright-container .checkbox-grid-two-col {
        background: var(--card-background) !important;
        border: 1px solid var(--border-color) !important;
        color: var(--text-primary) !important;
    }

    /* Remove border and shadow from search container */
    .search-container {
        border: none !important;
        box-shadow: none !important;
    }
    </style>

    <!-- Footer -->
    <footer class="bg-dark text-light py-3 small" role="contentinfo" style="font-size: 0.875rem;">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <p class="mb-2" style="font-size: 0.7rem;">
                        Cite as: ≈Å. Szoszkiewicz, Z. Kowalska (2025). UN General Comments Database. https://doi.org/10.5281/zenodo.10495720
                    </p>
                    <p class="mb-0 text-muted" style="font-size: 0.7rem;">
                        By continuing to use this site, you agree to our use of cookies.
                        <a href="/cookie_policy" class="text-light">Learn more</a>.
                    </p>
                </div>
                <div class="col-md-4 text-md-right">
                    <p class="mb-0">
                        <a href="https://github.com/lszoszk/UN-TreatyBodiesDocSearch"
                           target="_blank"
                           rel="noopener noreferrer"
                           class="footer-github-link">
                            <i class="fab fa-github mr-2"></i>
                            Open Source Project
                        </a>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ---- Keep --navbar-height synced to actual navbar height (helps mobile spacing)
            const navbar = document.querySelector('.navbar');
            function applyNavbarHeight() {
                if (!navbar) return;
                const h = navbar.getBoundingClientRect().height;
                document.documentElement.style.setProperty('--navbar-height', h + 'px');
            }
            applyNavbarHeight();
            window.addEventListener('resize', applyNavbarHeight);

            // Date validation (if date fields exist on the page)
            const today = new Date().toISOString().split('T')[0];
            const startDate = document.getElementById('start_date');
            const finishDate = document.getElementById('finish_date');

            if (startDate && finishDate) {
                startDate.setAttribute('max', today);
                finishDate.setAttribute('max', today);

                startDate.addEventListener('change', function() {
                    finishDate.setAttribute('min', this.value);
                });
            }

            // Enhanced form validation with accessibility
            const searchForm = document.getElementById('searchForm');
            const searchInput = document.querySelector('input[name="search_query"]');

            // Create error message container
            const errorContainer = document.createElement('div');
            errorContainer.id = 'form-errors';
            errorContainer.className = 'alert alert-danger mt-2';
            errorContainer.style.display = 'none';
            errorContainer.setAttribute('role', 'alert');
            errorContainer.setAttribute('aria-live', 'assertive');
            searchForm.insertBefore(errorContainer, searchForm.firstChild);

            searchForm.addEventListener('submit', function(e) {
                const searchQuery = searchInput.value.trim();
                const selectedFilters = document.querySelectorAll('input[name="labels[]"]:checked, input[name="treatyBodies[]"]:checked').length;

                // Clear previous errors
                errorContainer.style.display = 'none';
                errorContainer.innerHTML = '';
                searchInput.removeAttribute('aria-invalid');

                if (!searchQuery && selectedFilters === 0) {
                    e.preventDefault();

                    // Show accessible error message
                    errorContainer.innerHTML = '<i class="fas fa-exclamation-triangle mr-2" aria-hidden="true"></i>Please enter a search term or select at least one filter to search the database.';
                    errorContainer.style.display = 'block';

                    // Mark field as invalid
                    searchInput.setAttribute('aria-invalid', 'true');
                    searchInput.setAttribute('aria-describedby', 'search-help form-errors');

                    // Focus on the search input
                    searchInput.focus();

                    return false;
                }

                // Google Analytics tracking
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'search', {
                        'event_category': 'Site Search',
                        'event_label': searchQuery
                    });
                }
            });

            // Clear error on input
            searchInput.addEventListener('input', function() {
                if (this.hasAttribute('aria-invalid')) {
                    const errorContainer = document.getElementById('form-errors');
                    errorContainer.style.display = 'none';
                    this.removeAttribute('aria-invalid');
                    this.setAttribute('aria-describedby', 'search-help');
                }
            });

            // === Dark mode toggle (FIXED: aligns JS with CSS variables) ===
            const darkModeToggle = document.getElementById('dark-mode-toggle');
            const darkModeIcon = darkModeToggle.querySelector('i');
            const THEME_KEY = 'theme'; // 'light' | 'dark'

            function applyTheme(theme) {
                const isDark = theme === 'dark';
                // Flip CSS variable theme
                document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
                // Keep your body-scoped overrides working
                document.body.classList.toggle('dark-mode', isDark);
                // Icon swap
                darkModeIcon.className = isDark ? 'fas fa-sun' : 'fas fa-moon';
                // Persist
                localStorage.setItem(THEME_KEY, theme);
            }

            // Initial theme: stored preference > system preference
            const storedTheme = localStorage.getItem(THEME_KEY);
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            applyTheme(storedTheme ? storedTheme : (prefersDark ? 'dark' : 'light'));

            darkModeToggle.addEventListener('click', function(e) {
                e.preventDefault();
                const current = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light';
                applyTheme(current === 'dark' ? 'light' : 'dark');
            });

            // Enhanced filter interactions
            const addSelectButtons = (containerSelector, groupName) => {
                const container = document.querySelector(containerSelector);
                if (container) {
                    const selectAll = document.createElement('button');
                    selectAll.type = 'button';
                    selectAll.className = 'btn btn-sm btn-secondary mr-2 mb-2';
                    selectAll.innerHTML = '<i class="fas fa-check-square mr-1"></i>Select All';
                    selectAll.onclick = () => {
                        container.querySelectorAll(`input[name="${groupName}"]`).forEach(cb => cb.checked = true);
                    };

                    const selectNone = document.createElement('button');
                    selectNone.type = 'button';
                    selectNone.className = 'btn btn-sm btn-secondary mb-2';
                    selectNone.innerHTML = '<i class="fas fa-times-circle mr-1"></i>Clear All';
                    selectNone.onclick = () => {
                        container.querySelectorAll(`input[name="${groupName}"]`).forEach(cb => cb.checked = false);
                    };

                    const buttonContainer = document.createElement('div');
                    buttonContainer.className = 'mb-2';
                    buttonContainer.appendChild(selectAll);
                    buttonContainer.appendChild(selectNone);

                    container.parentNode.insertBefore(buttonContainer, container);
                }
            };

            addSelectButtons('.checkbox-grid-two-col', 'labels[]');

            // Load recent developments - simple and working implementation
            loadRecentDevelopments();

            // Accordion icon animation
            $('#advancedToggle').on('click', function() {
                const icon = $('#advancedIcon');
                const isCollapsed = $('#advancedFilters').hasClass('show');

                setTimeout(() => {
                    if (isCollapsed) {
                        icon.removeClass('fa-chevron-down').addClass('fa-sliders-h');
                    } else {
                        icon.removeClass('fa-sliders-h').addClass('fa-chevron-down');
                    }
                }, 150);
            });

            // Accessibility testing helper (development only)
            if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
                console.log('Accessibility Check: Enhanced Home Page Loaded');

                // Check for required accessibility features
                const accessibilityChecks = {
                    'Skip Link': document.querySelector('.sr-only-focusable'),
                    'Main Landmark': document.querySelector('main'),
                    'Form Labels': document.querySelectorAll('label').length,
                    'ARIA Attributes': document.querySelectorAll('[aria-label], [aria-labelledby], [aria-describedby]').length,
                    'Focus Management': document.activeElement !== document.body,
                    'Color Contrast': getComputedStyle(document.body).getPropertyValue('--text-primary')
                };

                console.table(accessibilityChecks);
            }

            // Load recent developments from crc_gc_info.json
            function loadRecentDevelopments() {
                fetch('/static/data/crc_gc_info.json')
                    .then(response => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Sort by adoption date (most recent first) and take the first 20
                        const sortedData = data.sort((a, b) => {
                            const dateA = new Date(a['Adoption Date']);
                            const dateB = new Date(b['Adoption Date']);
                            return dateB - dateA;
                        });

                        const recentDevelopments = sortedData.slice(0, 20);

                        const container = document.getElementById('recentDevelopments');
                        container.innerHTML = '';

                        // Create clickable, scrollable list
                        recentDevelopments.forEach(dev => {
                            const item = document.createElement('a');
                            item.className = 'development-item';
                            item.href = dev.Link;
                            item.target = '_blank';
                            item.rel = 'noopener noreferrer';

                            // Format date with abbreviated month and year
                            const adoptionDate = new Date(dev['Adoption Date']);
                            const formattedDate = adoptionDate.toLocaleDateString('en-US', {
                                year: 'numeric',
                                month: 'short'
                            });

                            // Extract committee abbreviation
                            const committee = dev.Committee || 'UN';

                            item.innerHTML = `
                                <span class="treaty-badge">${committee}</span>
                                <span class="development-text">${dev['Simplified Name'] || dev.Name}</span>
                                <span class="adoption-date">${formattedDate}</span>
                            `;

                            // Track clicks for analytics
                            item.addEventListener('click', function() {
                                if (typeof gtag !== 'undefined') {
                                    gtag('event', 'click', {
                                        'event_category': 'Recent Developments',
                                        'event_label': dev.Name
                                    });
                                }
                            });

                            container.appendChild(item);
                        });
                    })
                    .catch(error => {
                        console.error('Error loading recent developments:', error);

                        // Fallback to static data
                        const fallbackDevelopments = [
                            { body: "CEDAW", title: "General Recommendation No. 40 - Equal and inclusive representation of women in decision-making systems", date: "Oct 2024", link: "https://tbinternet.ohchr.org/_layouts/15/treatybodyexternal/Download.aspx?symbolno=CEDAW%2FC%2FGC%2F40&Lang=en" },
                            { body: "CRC", title: "General Comment No. 26 - Children's rights and the environment", date: "Aug 2023", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-comment-no-26-2023-childrens-rights-and" },
                            { body: "CED", title: "General Comment No. 1 - Enforced disappearance in migration context", date: "May 2023", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/cedcgc1-general-comment-no-1-2023-enforced" },
                            { body: "CEDAW", title: "General Recommendation No. 39 - Rights of indigenous women and girls", date: "Nov 2022", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-recommendation-no39-2022-rights-indigeneous" },
                            { body: "CRPD", title: "General Comment No. 8 - Right to work and employment", date: "Sep 2022", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/crpdcgc8-general-comment-no-8-2022-right-persons" },
                            { body: "CRC", title: "General Comment No. 25 - Children's rights in digital environment", date: "Mar 2021", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-comment-no-25-2021-childrens-rights-relation" },
                            { body: "CMW", title: "General Comment No. 5 - Migrants' right to liberty and freedom", date: "Apr 2021", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-comment-no-5-2021-migrants-rights-liberty" },
                            { body: "CERD", title: "General Recommendation No. 36 - Preventing racial profiling", date: "Dec 2020", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-recommendation-no-36-2020-preventing-and" },
                            { body: "CESCR", title: "General Comment No. 25 - Science and economic, social, cultural rights", date: "Apr 2020", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-comment-no-25-2020-science-and-economic-social" },
                            { body: "CCPR", title: "General Comment No. 37 - Right of peaceful assembly", date: "Jul 2020", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-comment-no-37-2020-right-peaceful-assembly" },
                            { body: "CRC", title: "General Comment No. 24 - Children's rights in child justice system", date: "Sep 2019", link: "https://www.ohchr.org/en/documents/general-comments-and-recommendations/general-comment-no-24-2019-childrens-rights-child" }
                        ];

                        const container = document.getElementById('recentDevelopments');
                        if (container) {
                            container.innerHTML = '';

                            fallbackDevelopments.forEach(dev => {
                                const item = document.createElement('a');
                                item.className = 'development-item';
                                item.href = dev.link;
                                item.target = '_blank';
                                item.rel = 'noopener noreferrer';

                                item.innerHTML = `
                                    <span class="treaty-badge">${dev.body}</span>
                                    <span class="development-text">${dev.title}</span>
                                    <span class="adoption-date">${dev.date}</span>
                                `;

                                container.appendChild(item);
                            });
                        }
                    });
            }

        });
    </script>
</body>
</html>
