/*
 * Unified Design System for UN Treaty Body Database (Cleaned)
 * Theme: Scholarly Warmth
 * Notes:
 * - Duplicates removed
 * - Conflicting styles resolved
 * - Progress bar unified (below fixed navbar)
 * - Copy feedback uses the inline (absolute) version only
 */

/* =============================
   CSS VARIABLES — LIGHT (DEFAULT)
   ============================= */
   :root {
    /* Brand */
    --primary-color: #009edb;
    --primary-light: #e3f2fd;
    --secondary-color: #f7fafc;
    --accent-color: #0a72b0;

    /* Text */
    --text-primary: #1a202c;
    --text-secondary: #2d3748;
    --text-muted: #4a5568;

    /* Semantics */
    --highlight-color: #faf089;
    --citation-color: #805ad5;
    --metadata-color: #38b2ac;

    /* Grays */
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --gray-900: #111827;

    /* Primary scale */
    --primary-50: #eff6ff;
    --primary-100: #dbeafe;
    --primary-200: #bfdbfe;
    --primary-300: #93c5fd;
    --primary-500: #3b82f6;
    --primary-600: #2563eb;
    --primary-700: #1d4ed8;
    --primary-800: #1e40af;

    --green-600: #16a34a;
    --accent-pink: #ec4899;

    /* UI */
    --border-color: #cbd5e0;
    --border-light: #e2e8f0;
    --success-color: #38a169;
    --warning-color: #d69e2e;
    --danger-color: #e53e3e;
    --background: #ffffff;
    --card-background: rgba(252,252,252,0.95);
    --navbar-background: rgba(255,255,255,0.88);

    /* Layout */
    --sidebar-width: 350px;
    --navbar-height: 70px; /* updated via JS to actual height */

    /* Shadows */
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
    --shadow-lg: 0 10px 15px rgba(0,0,0,0.1);
    --shadow-xl: 0 25px 50px rgba(0,0,0,0.15);

    /* Radii */
    --radius-base: 4px;
    --radius-sm: 4px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-full: 50%;

    /* Transitions */
    --transition-fast: 0.15s ease;
    --transition-base: 0.3s ease;

    /* Z-index */
    --z-fixed: 1000;
    --z-sticky: 1020;
    --z-modal: 1050;

    /* Spacing */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    --spacing-2xl: 3rem;

    /* Additional spacing aliases */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 0.75rem;
    --space-4: 1rem;
    --space-5: 1.25rem;
    --space-6: 1.5rem;
    --space-8: 2rem;
    --space-10: 2.5rem;

    /* Typography */
    --font-family-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Helvetica Neue', sans-serif;
    --font-size-xs: 0.75rem;
    --font-size-sm: 0.875rem;
    --font-size-base: 1rem;
    --font-size-lg: 1.125rem;
    --font-size-xl: 1.25rem;
    --font-size-2xl: 1.5rem;
    --font-size-3xl: 1.875rem;
    --font-size-4xl: 2.25rem;

    --font-weight-light: 300;
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    --line-height-tight: 1.25;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.75;
  }

  /* =============================
     DARK THEME VARIABLES
     ============================= */
  :root[data-theme="dark"] {
    color-scheme: dark;

    /* Brand & accents */
    --primary-color: #5fb2f2;              /* lighter to pop on dark */
    --primary-light: rgba(99,179,237,0.18);
    --secondary-color: #232a36;
    --accent-color: #d7a648;

    /* Text */
    --text-primary: #eef2f7;
    --text-secondary: #cfd7e3;
    --text-muted: #9aa7bd;

    /* Surfaces */
    --background: #0f1720;
    --card-background: rgba(21,27,36,0.95);
    --navbar-background: rgba(15,23,32,0.88);

    /* Borders & shadows */
    --border-light: #2a3442;
    --border-color: #3b4758;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.5);
    --shadow-md: 0 6px 12px rgba(0,0,0,0.55);
    --shadow-lg: 0 14px 28px rgba(0,0,0,0.6);
    --shadow-xl: 0 28px 56px rgba(0,0,0,0.65);

    /* Semantics */
    --highlight-color: #3b2f0b;
    --citation-color: #b9a3ff;
    --metadata-color: #63e6d5;

    /* Extended palette tuned for dark */
    --gray-50:  #1e2733;
    --gray-100: #232d3b;
    --gray-200: #2b3646;
    --gray-300: #354257;
    --gray-400: #43526a;
    --gray-500: #5c6b86;
    --gray-600: #8a99b3;
    --gray-700: #c1cad9;
    --gray-800: #e6ebf2;
    --gray-900: #ffffff;

    /* Primary scale on dark */
    --primary-50:  #1d2a44;
    --primary-100: #213154;
    --primary-200: #263c69;
    --primary-600: #5fb2f2;
    --primary-700: #8cc8f7;
    --primary-800: #b9defb;

    /* Status */
    --success-color: #3dd98a;
    --warning-color: #f6bf4e;
    --danger-color:  #ff6b6b;
    --accent-pink: #ff7dbb;
  }

  /* =============================
     BASE / TYPOGRAPHY
     ============================= */
  * { box-sizing: border-box; }

  body {
    font-family: var(--font-family-primary);
    font-size: var(--font-size-base);
    font-weight: 300;
    line-height: 1.6;
    color: var(--text-primary);
    background-color: var(--background);
    transition: all 0.3s ease;
    margin: 0;
    padding: 0;
    padding-bottom: 40px; /* for fixed footer */
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: 400;
    line-height: 1.4;
    margin-bottom: var(--spacing-md);
    color: var(--text-primary);
  }

  h1, h2 { font-weight: 500; }

  h1 { font-size: var(--font-size-4xl); }
  h2 { font-size: var(--font-size-3xl); }
  h3 { font-size: var(--font-size-2xl); }
  h4 { font-size: var(--font-size-xl); }
  h5 { font-size: var(--font-size-lg); }

  h6 {
    font-size: var(--font-size-base);
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  p { margin-bottom: var(--spacing-md); color: var(--text-secondary); }

  a { color: var(--primary-color); text-decoration: none; transition: color 0.2s ease; }
  a:hover { color: var(--accent-color); text-decoration: none; }

  /* =============================
     NAVIGATION
     ============================= */
  .navbar {
    background: var(--navbar-background) !important;
    backdrop-filter: blur(15px) saturate(180%);
    -webkit-backdrop-filter: blur(15px) saturate(180%);
    border-bottom: 1px solid var(--border-color);
    box-shadow: var(--shadow-md);
    z-index: 1050;
    min-height: 70px;
    position: fixed !important;
    top: 0; left: 0; right: 0; width: 100%;
  }

  .navbar-brand {
    color: var(--primary-color) !important;
    font-weight: 600;
    font-size: var(--font-size-xl);
    display: flex; align-items: center; gap: var(--spacing-sm);
    transition: color 0.3s ease;
    margin-left: 10px;
  }
  .navbar-brand:hover { color: var(--accent-color) !important; }

  .navbar-nav { align-items: center; }
  .navbar-nav .nav-item { position: relative; }
  .navbar-nav .nav-link {
    color: var(--text-secondary) !important;
    font-weight: 400;
    transition: all 0.3s ease;
    padding: var(--spacing-sm) var(--spacing-md) !important;
    border-radius: var(--radius-md);
    position: relative;
  }
  .navbar-nav .nav-link:hover { color: var(--primary-color) !important; background: var(--primary-light); }
  .navbar-nav .nav-link.active { color: var(--primary-color) !important; background: var(--primary-light); font-weight: 500; }

  /* Hover-to-open dropdowns on desktop */
  @media (min-width: 992px) {
    .nav-item.dropdown:hover > .dropdown-menu { display: block; }
    .nav-item.dropdown:hover > .nav-link { background: var(--primary-light); color: var(--primary-color) !important; }
  }

  .navbar-toggler { padding: var(--spacing-xs) var(--spacing-sm); transition: all 0.2s ease; }
  .navbar-toggler:hover { background: var(--primary-light); }
  .navbar-toggler:focus { box-shadow: 0 0 0 3px var(--primary-light); outline: none; }

  /* Hamburger icon (works without Bootstrap theme helpers) */
  .navbar-toggler-icon { display: inline-block; width: 1.5em; height: 1.5em; background-repeat: no-repeat; background-position: center; background-size: 100% 100%; margin-right: 5px;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(26,32,44,0.9)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
  }
  :root[data-theme="dark"] .navbar-toggler-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='rgba(238,242,247,0.92)' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
  }

  /* === Mobile Navigation – UX pass (<= 991.98px) === */
  @media (max-width: 991.98px) {
    /* Make the collapsed menu a tidy full-height drawer */
    .navbar-collapse {
      position: fixed;
      top: var(--navbar-height);
      left: 0;
      right: 0;
      height: calc(100vh - var(--navbar-height));
      overflow-y: auto;

      /* surface */
      background: var(--card-background);
      border: 0;
      border-radius: 0;
      box-shadow: var(--shadow-xl);

      /* spacing */
      padding: var(--spacing-md) var(--spacing-lg);
      margin: 0;
      z-index: var(--z-sticky); /* above page, below modals */
    }

    /* Make nav links large, full-width, and with clear separators */
    .navbar-nav .nav-item { margin: 0; }
    .navbar-nav .nav-link {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;       /* text left, caret right */
      gap: var(--spacing-sm);
      margin: 0;
      text-align: left;
      font-size: var(--font-size-lg);
      border-bottom: 1px solid var(--border-light);
    }
    .navbar-nav .nav-item:last-child .nav-link { border-bottom: 0; }

    /* Caret animation & alignment */
    .navbar-nav .dropdown-toggle::after {
      margin-left: var(--spacing-sm);
      transition: transform 0.25s ease;
    }
    .navbar-nav .dropdown-toggle[aria-expanded="true"]::after { transform: rotate(180deg); }

    /* Submenus live inline; remove weird offsets/indents from earlier rules */
    .dropdown-menu {
      position: static !important;      /* no popover positioning on mobile */
      float: none !important;
      transform: none !important;
      display: block;                   /* let Bootstrap toggle visibility via .show */
      background: transparent;
      border: 0;
      box-shadow: none;
      padding: 0;
      margin: 0;
      min-width: 0;
      border-radius: 0;
    }

    /* Smooth reveal using Bootstrap's .show class */
    .dropdown .dropdown-menu {
      max-height: 0;
      opacity: 0;
      visibility: hidden;
      overflow: hidden;
      transition: max-height 0.25s ease, opacity 0.2s ease, visibility 0.2s ease;
    }
    .dropdown.show > .dropdown-menu,
    .nav-item .dropdown-menu.show {
      max-height: 100vh; /* effectively "auto" with transition */
      opacity: 1;
      visibility: visible;
    }

    /* First level dropdown items: clear indent, big tap area */
    .dropdown-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      font-size: var(--font-size-base);
      color: var(--text-secondary);
      border-bottom: 1px dashed var(--border-light);
      border-radius: 0;
      background: transparent;
    }
    .dropdown-item:last-child { border-bottom: 0; }

    /* Hover/touch feedback */
    .dropdown-item:hover,
    .dropdown-item:focus {
      background: var(--primary-light);
      color: var(--primary-color);
      text-decoration: none;
    }

    /* Nested submenu support on mobile (indent children) */
    .dropdown-submenu { position: static; }
    .dropdown-submenu > .dropdown-menu { padding-left: var(--spacing-lg); }
    .dropdown-submenu .dropdown-item { padding-left: var(--spacing-md); }

    /* Ensure the hamburger is always visible and clickable */
    .navbar-toggler { z-index: var(--z-sticky); padding: var(--spacing-xs) var(--spacing-sm); }
    .navbar-toggler:hover { background: var(--primary-light); }
    .navbar-toggler:focus { box-shadow: 0 0 0 3px var(--primary-light); outline: none; }

    /* Prevent layout shift behind the fixed drawer */
    body { padding-top: var(--navbar-height); }

    /* Better focus outlines for accessibility while in the drawer */
    .navbar-collapse a:focus,
    .navbar-collapse button:focus {
      outline: 3px solid var(--primary-color);
      outline-offset: 2px;
    }
  }

  /* Keep dropdowns click-free on desktop; on touch, tapping still works via Bootstrap JS */
  @media (min-width: 992px) {
    .dropdown-toggle::after { pointer-events: none; }
  }

  /* Dark mode nav */
  body.dark-mode .navbar { background: var(--navbar-background) !important; }
  body.dark-mode .dropdown-menu { background: var(--card-background); border-color: var(--border-color); }
  body.dark-mode .dropdown-item { color: var(--text-secondary); }
  body.dark-mode .dropdown-item:hover { background: var(--primary-light); color: var(--primary-color); }
  body.dark-mode .navbar-collapse { background: var(--card-background); border-color: var(--border-color); }

  /* Dark mode toggle */
  #dark-mode-toggle { cursor: pointer; padding: var(--spacing-sm) !important; border-radius: 50%; transition: all 0.2s ease; display: flex; align-items: center; justify-content: center; }
  #dark-mode-toggle:hover { background: var(--secondary-color); }

  /* =============================
     BUTTONS / FORMS / CARDS
     ============================= */
  .btn { border-radius: var(--radius-md); padding: var(--spacing-sm) var(--spacing-lg); font-weight: 500; transition: all 0.2s ease; border: none; cursor: pointer; display: inline-flex; align-items: center; gap: var(--spacing-sm); }
  .btn-primary { background: var(--primary-color); color: #fff; }
  .btn-primary:hover { background: var(--accent-color); transform: translateY(-1px); box-shadow: var(--shadow-md); }
  .btn-secondary { background: var(--secondary-color); color: var(--text-secondary); border: 1px solid var(--border-color); }
  .btn-secondary:hover { background: var(--primary-light); border-color: var(--primary-color); color: var(--primary-color); }
  .btn-minimal { background: transparent; border: 1px solid var(--border-color); color: var(--text-secondary); padding: 0.375rem 0.75rem; font-size: var(--font-size-sm); }
  .btn-minimal:hover { background: var(--primary-light); border-color: var(--primary-color); color: var(--primary-color); }

  .form-control { border: 1px solid var(--border-color); border-radius: var(--radius-md); padding: var(--spacing-sm) var(--spacing-md); background: var(--card-background); color: var(--text-primary); transition: all 0.2s ease; }
  .form-control:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px var(--primary-light); }
  .form-control::placeholder { color: var(--text-muted); }
  .form-check-input:checked { background-color: var(--primary-color); border-color: var(--primary-color); }

  .card { background: var(--card-background); border: 1px solid var(--border-color); border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); transition: all 0.2s ease; }
  .card:hover { box-shadow: var(--shadow-md); transform: translateY(-1px); }
  .card-header { background: var(--secondary-color); border-bottom: 1px solid var(--border-color); padding: var(--spacing-lg); border-radius: var(--radius-lg) var(--radius-lg) 0 0; }
  .card-body { padding: var(--spacing-lg); }

  /* =============================
     HERO / SEARCH / FILTERS / STATS / FEATURES
     ============================= */
  .hero-section { background: linear-gradient(135deg, var(--primary-color) 0%, var(--accent-color) 100%); color: #fff; padding: var(--spacing-2xl) 0; margin-top: 0px; text-align: center; }
  .hero-title { font-size: var(--font-size-4xl); font-weight: 700; margin-bottom: var(--spacing-lg); color: #fff; }
  .hero-subtitle { font-size: var(--font-size-xl); opacity: 0.9; margin-bottom: var(--spacing-xl); color: #fff; }
  .hero-description { font-size: var(--font-size-lg); opacity: 0.8; max-width: 600px; margin: 0 auto var(--spacing-xl); color: #fff; }

  .search-container { background: rgba(255,255,255,0.95); border-radius: var(--radius-lg); padding: var(--spacing-xl); box-shadow: var(--shadow-lg); margin-top: var(--spacing-xl); }
  body.dark-mode .search-container { background: rgba(33,37,41,0.95); }
  .search-input-group { position: relative; margin-bottom: var(--spacing-lg); }
  .search-input-group input { border-radius: 25px; border: 2px solid var(--border-color); padding: 15px 25px; font-size: var(--font-size-lg); transition: all 0.3s ease; }
  .search-input-group input:focus { border-color: var(--primary-color); box-shadow: 0 0 0 0.2rem rgba(26,54,93,0.25); }
  .search-btn { background: linear-gradient(45deg, var(--primary-color), var(--accent-color)); border: none; border-radius: 25px; padding: 15px 30px; font-weight: 600; color: #fff; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(26,54,93,0.3); }
  .search-btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(26,54,93,0.4); }
  .search-btn:disabled { opacity: 0.7; cursor: not-allowed; transform: none !important; box-shadow: 0 4px 15px rgba(26,54,93,0.2); }

  .filter-section { background: var(--secondary-color); border-radius: var(--radius-md); padding: var(--spacing-lg); margin-top: var(--spacing-md); }
  body.dark-mode .filter-section { background: var(--secondary-color); }
  .filter-group { margin-bottom: var(--spacing-lg); }
  .filter-title { font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm); }
  .checkbox-grid, .checkbox-grid-two-col { display: grid; gap: var(--spacing-sm); max-height: 200px; overflow-y: auto; background: var(--card-background); padding: var(--spacing-md); border-radius: var(--radius-md); border: 1px solid var(--border-color); }
  .checkbox-grid { grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); }
  .checkbox-grid-two-col { grid-template-columns: repeat(2, 1fr); }
  body.dark-mode .checkbox-grid { background: var(--card-background); border-color: var(--border-color); }

  .stats-preview { background: var(--card-background); border-radius: var(--radius-md); padding: var(--spacing-lg); margin-top: var(--spacing-md); box-shadow: var(--shadow-sm); }
  .stat-item { text-align: center; padding: var(--spacing-md); }
  .stat-number { font-size: var(--font-size-3xl); font-weight: 700; color: var(--primary-color); display: block; }
  .stat-label { font-size: var(--font-size-sm); color: var(--text-muted); margin-top: var(--spacing-sm); }

  .features-section { padding: var(--spacing-2xl) 0; background: var(--secondary-color); }
  body.dark-mode .features-section { background: var(--secondary-color); }
  .feature-card { background: var(--card-background); padding: var(--spacing-xl); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); transition: all 0.3s ease; text-align: center; height: 100%; }
  .feature-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-lg); }
  .feature-icon { font-size: var(--font-size-4xl); color: var(--primary-color); margin-bottom: var(--spacing-lg); }

  /* =============================
     UTILITIES
     ============================= */
  .text-center { text-align: center; }
  .text-left { text-align: left; }
  .text-right { text-align: right; }

  .mb-0 { margin-bottom: 0; }
  .mb-1 { margin-bottom: var(--spacing-xs); }
  .mb-2 { margin-bottom: var(--spacing-sm); }
  .mb-3 { margin-bottom: var(--spacing-md); }
  .mb-4 { margin-bottom: var(--spacing-lg); }
  .mb-5 { margin-bottom: var(--spacing-xl); }

  .mt-0 { margin-top: 0; }
  .mt-1 { margin-top: var(--spacing-xs); }
  .mt-2 { margin-top: var(--spacing-sm); }
  .mt-3 { margin-top: var(--spacing-md); }
  .mt-4 { margin-top: var(--spacing-lg); }
  .mt-5 { margin-top: var(--spacing-xl); }

  .p-0 { padding: 0; }
  .p-1 { padding: var(--spacing-xs); }
  .p-2 { padding: var(--spacing-sm); }
  .p-3 { padding: var(--spacing-md); }
  .p-4 { padding: var(--spacing-lg); }
  .p-5 { padding: var(--spacing-xl); }

  /* Animations */
  .fade-in { animation: fadeIn 0.3s ease-in; }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(10px);} to { opacity: 1; transform: translateY(0);} }
  .slide-up { animation: slideUp 0.4s cubic-bezier(0.4,0,0.2,1); }
  @keyframes slideUp { from { opacity: 0; transform: translateY(30px);} to { opacity: 1; transform: translateY(0);} }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
    .dropdown-menu { animation: none !important; }
  }

  .btn:focus,
  .form-control:focus,
  .nav-link:focus,
  #dark-mode-toggle:focus,
  a:focus,
  input:focus,
  button:focus,
  select:focus,
  textarea:focus,
  [tabindex]:focus {
    outline: 3px solid var(--primary-color);
    outline-offset: 2px;
    box-shadow: 0 0 0 1px var(--background), 0 0 0 4px var(--primary-color);
  }

  .sr-only { position: absolute !important; width: 1px !important; height: 1px !important; padding: 0 !important; margin: -1px !important; overflow: hidden !important; clip: rect(0,0,0,0) !important; white-space: nowrap !important; border: 0 !important; }
  .sr-only-focusable:focus {
    position: static !important; width: auto !important; height: auto !important; padding: 0.5rem 1rem !important; margin: 0 !important; overflow: visible !important; clip: auto !important; white-space: normal !important; background: var(--primary-color) !important; color: #fff !important; text-decoration: none !important; z-index: 9999 !important; border-radius: var(--radius-md) !important; font-weight: 600 !important;
  }

  @media (prefers-contrast: high) {
    :root { --border-color: #000000; --text-muted: #2d3748; --text-secondary: #1a202c; }
    body.dark-mode { --border-color: #ffffff; --text-muted: #e2e8f0; --text-secondary: #f7fafc; }
  }

  /* =============================
     RECENT DEVELOPMENTS
     ============================= */
  .recent-developments-section { padding: var(--spacing-2xl) 0; background: var(--secondary-color); }
  .developments-title { font-size: var(--font-size-3xl); font-weight: 600; color: var(--primary-color); margin-bottom: var(--spacing-sm); text-align: center; }
  .developments-subtitle { font-size: var(--font-size-lg); color: var(--text-muted); font-weight: 400; margin: 0 0 var(--spacing-xl); text-align: center; }
  .developments-container { background: var(--card-background); border-radius: var(--radius-md); box-shadow: var(--shadow-sm); border: 1px solid var(--border-color); padding: var(--spacing-md); height: 300px; overflow-y: auto; display: flex; flex-direction: column; gap: var(--spacing-sm); }
  body.dark-mode .developments-container { background: var(--card-background); border-color: var(--border-color); }
  .development-item { background: transparent; border: none; border-radius: var(--radius-sm); padding: var(--spacing-sm) var(--spacing-md); transition: all 0.2s ease; animation: slideInUp 0.6s ease-out forwards; opacity: 0; flex-shrink: 0; }
  .development-item:hover { background: var(--primary-light); }
  .development-content { display: flex; align-items: center; gap: var(--spacing-md); font-size: var(--font-size-sm); }
  .development-text { flex: 1; color: var(--text-secondary); font-weight: 400; line-height: 1.4; }
  .adoption-date { color: var(--text-muted); font-size: var(--font-size-xs); font-weight: 500; white-space: nowrap; }
  .treaty-badge { background: linear-gradient(45deg, #8b45c7, #4299e1); color: #fff; padding: var(--spacing-xs) var(--spacing-sm); border-radius: 12px; font-size: var(--font-size-xs); font-weight: 600; letter-spacing: 0.05em; flex-shrink: 0; min-width: 60px; text-align: center; }

  /* Scrollbar (developments) */
  .developments-container::-webkit-scrollbar { width: 8px; }
  .developments-container::-webkit-scrollbar-track { background: var(--secondary-color); border-radius: 4px; }
  .developments-container::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; transition: background 0.3s ease; }
  .developments-container::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

  /* =============================
     ADVANCED SEARCH SECTION
     ============================= */
  .advanced-search-section { background: linear-gradient(135deg, rgba(255,255,255,0.98), rgba(247,250,252,0.95)) !important; border: 1px solid var(--border-color); box-shadow: 0 8px 32px rgba(0,158,219,0.08); backdrop-filter: blur(10px); }
  body.dark-mode .advanced-search-section { background: linear-gradient(135deg, rgba(26,32,44,0.98), rgba(45,55,72,0.95)) !important; border-color: var(--border-color); box-shadow: 0 8px 32px rgba(66,153,225,0.1); }
  .advanced-search-section .filter-title { color: var(--text-primary); font-weight: 600; }
  .advanced-search-section .filter-group .bg-white { background: var(--card-background) !important; border: 1px solid var(--border-color) !important; }
  body.dark-mode .advanced-search-section .filter-group .bg-white { background: var(--card-background) !important; color: var(--text-primary); border-color: var(--border-color) !important; }
  .advanced-search-section .checkbox-grid-two-col,
  .advanced-search-section .checkbox-grid { background: var(--card-background) !important; border: 1px solid var(--border-color) !important; }

  /* =============================
     SPECIAL PROCEDURES — LAYOUT
     ============================= */
  .enhanced-sidebar {
    position: fixed;
    top: var(--navbar-height);
    left: 0;
    width: var(--sidebar-width);
    height: calc(100vh - var(--navbar-height));
    background: var(--card-background);
    backdrop-filter: blur(10px);
    border-right: 1px solid var(--border-light);
    box-shadow: var(--shadow-md);
    z-index: var(--z-sticky);
    overflow-y: auto;
    font-family: var(--font-family-primary);
    transition: transform 0.3s ease;
    padding: var(--spacing-lg);
  }
  .enhanced-sidebar.collapsed { transform: translateX(-100%); }
  .enhanced-sidebar.active { transform: translateX(0); }

  .enhanced-sidebar__header { padding: var(--spacing-lg); border-bottom: 1px solid var(--border-light); background: linear-gradient(135deg, var(--primary-light), var(--secondary-color)); margin: calc(-1 * var(--spacing-lg)) calc(-1 * var(--spacing-lg)) var(--spacing-lg); }
  .enhanced-sidebar__title { color: var(--text-primary); font-size: var(--font-size-lg); font-weight: 600; margin-bottom: var(--spacing-md); display: flex; align-items: center; gap: var(--spacing-sm); }
  .enhanced-sidebar__title i { color: var(--primary-color); font-size: var(--font-size-lg); }

  .mandate-selector { width: 100%; margin-bottom: var(--spacing-xl); }
  .mandate-selector select { width: 100%; padding: var(--spacing-sm) var(--spacing-md); border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--background); color: var(--text-primary); font-size: var(--font-size-sm); transition: all var(--transition-base); appearance: none; background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right var(--spacing-sm) center; background-size: 16px 12px; padding-right: var(--spacing-xl); }
  .mandate-selector select:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(0,158,219,0.1); }

  .documents-section { padding: 0; margin-top: var(--spacing-md); }
  .documents-section__title { color: var(--text-primary); font-size: var(--font-size-base); font-weight: 600; margin: 0; padding: var(--spacing-lg); border-bottom: 1px solid var(--border-light); background: var(--secondary-color); display: flex; align-items: center; gap: var(--spacing-sm); }
  .documents-section__title i { color: var(--primary-color); font-size: var(--font-size-base); }

  .document-list { list-style: none; padding: 0; margin: 0; }
  .document-list li { margin: 0; border-bottom: 1px solid var(--border-light); transition: all var(--transition-base); }
  .document-list li:last-child { border-bottom: none; }
  .document-list li a { display: block; padding: var(--spacing-md) var(--spacing-lg); color: var(--text-secondary); text-decoration: none; font-size: var(--font-size-sm); line-height: 1.4; transition: all var(--transition-base); position: relative; }
  .document-list li a:hover { background: var(--primary-light); color: var(--primary-color); padding-left: calc(var(--spacing-lg) + var(--spacing-xs)); }
  .document-list li a.active, .document-list li.active a { background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); color: #fff; font-weight: 500; box-shadow: inset 4px 0 0 var(--accent-color); }
  .document-list li a.active::before, .document-list li.active a::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: var(--accent-color); }

  .enhanced-main { margin-left: var(--sidebar-width); min-height: calc(100vh - var(--navbar-height)); padding: var(--spacing-xl); font-family: var(--font-family-primary); background: var(--background); transition: margin-left var(--transition-base); }
  .enhanced-main.expanded { margin-left: 0; }

  /* Search within doc */
  .document-search-container { background: var(--card-background); border: 1px solid var(--border-light); border-radius: var(--radius-lg); padding: var(--spacing-lg); margin-bottom: var(--spacing-lg); box-shadow: var(--shadow-sm); }
  .search-header { display: flex; align-items: center; gap: var(--spacing-sm); margin-bottom: var(--spacing-md); }
  .search-header i { color: var(--primary-color); font-size: var(--font-size-lg); }
  .search-header h3 { color: var(--text-primary); font-size: var(--font-size-lg); font-weight: 600; margin: 0; }
  .search-input-wrapper { position: relative; }
  .search-input-wrapper input { width: 100%; padding: var(--spacing-md); padding-right: var(--spacing-2xl); border: 1px solid var(--border-color); border-radius: var(--radius-md); background: var(--background); color: var(--text-primary); font-size: var(--font-size-sm); transition: all var(--transition-base); }
  .search-input-wrapper input:focus { outline: none; border-color: var(--primary-color); box-shadow: 0 0 0 3px rgba(0,158,219,0.1); }
  .search-input-wrapper .search-icon { position: absolute; right: var(--spacing-md); top: 50%; transform: translateY(-50%); color: var(--text-muted); pointer-events: none; }

  /* Document viewer */
  .document-viewer { background: var(--card-background); border: 1px solid var(--border-light); border-radius: var(--radius-lg); min-height: 500px; box-shadow: var(--shadow-sm); overflow: hidden; padding: var(--spacing-xl); position: relative; }
  .document-viewer.empty { display: flex; align-items: center; justify-content: center; text-align: center; color: var(--text-muted); }
  .document-viewer.empty i { color: var(--text-muted); margin-bottom: var(--spacing-md); }

  .document-meta { background: var(--secondary-color); padding: var(--spacing-lg); border-bottom: 1px solid var(--border-light); }
  .document-meta h2 { color: var(--text-primary); font-size: var(--font-size-xl); font-weight: 600; margin-bottom: var(--spacing-sm); }
  .document-meta p { color: var(--text-secondary); font-size: var(--font-size-sm); margin: 0; }

  .document-content { padding: var(--spacing-xl); line-height: 1.6; color: var(--text-primary); }
  .document-content h1, .document-content h2, .document-content h3, .document-content h4 { color: var(--text-primary); font-weight: 600; text-align: center; }
  .document-content h1 { font-size: var(--font-size-2xl); margin: var(--spacing-xl) 0 var(--spacing-lg); }
  .document-content h2 { font-size: var(--font-size-xl); margin: var(--spacing-lg) 0 var(--spacing-md); }
  .document-content h3 { font-size: var(--font-size-lg); margin: var(--spacing-md) 0 var(--spacing-sm); }
  .document-content h4 { font-size: var(--font-size-base); margin: var(--spacing-md) 0 var(--spacing-sm); }

  /* Action buttons */
  .action-btn { display: inline-flex; align-items: center; gap: var(--spacing-xs); padding: var(--spacing-sm) var(--spacing-md); border: none; border-radius: var(--radius-md); background: var(--primary-color); color: #fff; font-size: var(--font-size-sm); font-weight: 500; text-decoration: none; cursor: pointer; transition: all var(--transition-base); box-shadow: var(--shadow-sm); }
  .action-btn:hover { background: var(--accent-color); transform: translateY(-1px); box-shadow: var(--shadow-md); color: #fff; }
  .action-btn.secondary { background: var(--text-muted); color: #fff; }
  .action-btn.secondary:hover { background: var(--text-secondary); }
  .action-btn i { font-size: var(--font-size-sm); }

  /* Numbered paragraphs */
  .document-content .numbered-paragraph { position: relative; margin-bottom: var(--spacing-md); padding-left: 0; text-align: justify; line-height: 1.7; color: var(--text-primary); }
  .document-content .paragraph-number { display: inline; font-weight: 600; color: var(--primary-color); margin-right: var(--spacing-sm); }

  /* Lists */
  .document-content ul, .document-content ol { margin: var(--spacing-md) 0; padding-left: var(--spacing-lg); font-size: var(--font-size-sm); line-height: 1.6; }
  .document-content li { margin-bottom: var(--spacing-xs); text-align: justify; color: var(--text-primary); }

  /* Tables */
  .document-content table { width: 100%; border-collapse: collapse; margin: var(--spacing-lg) 0; font-size: var(--font-size-sm); border-radius: var(--radius-md); overflow: hidden; box-shadow: var(--shadow-sm); }
  .document-content th, .document-content td { border: 1px solid var(--border-color); padding: var(--spacing-sm) var(--spacing-md); text-align: left; vertical-align: top; }
  .document-content th { background: var(--secondary-color); font-weight: 600; color: var(--text-primary); border-bottom: 2px solid var(--primary-color); }
  .document-content td { background: var(--card-background); color: var(--text-secondary); }
  .document-content tr:nth-child(even) td { background: var(--secondary-color); }

  /* Table of Contents */
  .toc-container { background: var(--card-background); border: 1px solid var(--border-light); border-radius: var(--radius-lg); padding: var(--spacing-lg); margin-bottom: var(--spacing-xl); box-shadow: var(--shadow-sm); }
  .toc-title { font-size: var(--font-size-lg); font-weight: 600; margin-bottom: var(--spacing-md); color: var(--text-primary); text-align: center; display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); }
  .toc-title::before, .toc-title::after { content: ''; width: 30px; height: 2px; background: var(--primary-color); border-radius: 2px; }
  .toc-list { list-style: none; padding: 0; margin: 0; }
  .toc-item { padding: var(--spacing-xs) 0; }
  .toc-link { color: var(--text-secondary); text-decoration: none; display: block; padding: var(--spacing-xs) var(--spacing-sm); border-radius: var(--radius-sm); transition: all var(--transition-base); font-size: var(--font-size-sm); position: relative; }
  .toc-link:hover { background: var(--primary-light); color: var(--primary-color); padding-left: calc(var(--spacing-sm) + var(--spacing-xs)); }
  .toc-link.toc-h2 { padding-left: var(--spacing-md); font-size: var(--font-size-sm); }
  .toc-link.toc-h3 { padding-left: var(--spacing-lg); font-size: var(--font-size-xs); color: var(--text-muted); }
  .toc-link.toc-h4 { padding-left: var(--spacing-xl); font-size: var(--font-size-xs); color: var(--text-muted); }

  /* Footnotes */
  .footnote-ref { cursor: pointer; color: #2a5298; position: relative; font-size: 12px; border-bottom: 1px dotted currentColor; background: #f0f8ff; padding: 1px 3px; border-radius: 3px; }
  .footnote-tooltip { position: fixed; background: var(--card-background) !important; color: var(--text-primary) !important; border: 2px solid var(--primary-color) !important; border-radius: 8px; padding: 8px 12px; font-size: 11px; line-height: 1.4; box-shadow: var(--shadow-lg) !important; z-index: 1002; white-space: normal; text-align: left; max-width: 280px; word-wrap: break-word; display: none; pointer-events: none; }
  .footnote-tooltip.show { display: block; }
  .footnote-tooltip::before { content: ''; position: absolute; width: 0; height: 0; border-style: solid; }
  .footnote-tooltip.position-top::before { top: 100%; left: 50%; transform: translateX(-50%); border-width: 6px 6px 0 6px; border-color: var(--primary-color) transparent transparent transparent; }
  .footnote-tooltip.position-bottom::before { bottom: 100%; left: 50%; transform: translateX(-50%); border-width: 0 6px 6px 6px; border-color: transparent transparent var(--primary-color) transparent; }
  .footnote-tooltip.position-left::before { top: 50%; left: 100%; transform: translateY(-50%); border-width: 6px 0 6px 6px; border-color: transparent transparent transparent var(--primary-color); }
  .footnote-tooltip.position-right::before { top: 50%; right: 100%; transform: translateY(-50%); border-width: 6px 6px 6px 0; border-color: transparent var(--primary-color) transparent transparent; }

  /* Highlights */
  .highlight, mark { background: rgba(255,229,100,0.45); color: var(--text-primary); border-radius: 3px; padding: 0 2px; }
  :root[data-theme="dark"] .highlight,
  :root[data-theme="dark"] mark { background: rgba(255,229,100,0.25); }

  /* Sidebar toggle */
  .sidebar-toggle {
    position: fixed;
    top: calc(var(--navbar-height) + var(--spacing-md));
    left: var(--spacing-md);
    z-index: var(--z-fixed);
    background: var(--primary-color);
    color: #fff;
    border: none;
    border-radius: var(--radius-lg);
    width: 40px; height: 40px;
    display: none; align-items: center; justify-content: center;
    cursor: pointer; box-shadow: var(--shadow-md); transition: all var(--transition-fast);
  }
  .sidebar-toggle:hover { background: var(--accent-color); transform: scale(1.05); }
  .sidebar-toggle.active { left: calc(var(--sidebar-width) + var(--spacing-md)); }

  /* Progress bar (below fixed navbar) */
  .scroll-progress-bar {
    position: fixed;
    top: var(--navbar-height);
    left: 0;
    height: 4px;
    width: 0; /* updated by JS */
    background: linear-gradient(90deg, var(--primary-600), var(--accent-pink));
    z-index: 1049; /* navbar is 1050 */
    transition: width var(--transition-fast);
    pointer-events: none;
  }

  /* Scroll to top */
  .scroll-to-top { position: fixed; bottom: var(--spacing-lg); right: var(--spacing-lg); width: 50px; height: 50px; background: var(--primary-color); color: #fff; border: none; border-radius: var(--radius-full); display: none; align-items: center; justify-content: center; cursor: pointer; box-shadow: var(--shadow-lg); transition: all var(--transition-fast); z-index: var(--z-sticky); }
  .scroll-to-top:hover { background: var(--accent-color); transform: translateY(-2px); box-shadow: var(--shadow-xl); }

  /* Modal search (inline) */
  .modal-search-bar { position: sticky; top: 0; background: var(--card-background); border-bottom: 1px solid var(--border-color); padding: var(--spacing-sm); z-index: 15; }
  .modal-search-input { width: 100%; padding: var(--spacing-sm); border: 1px solid var(--border-color); border-radius: var(--radius-sm); }

  /* Copy feedback — inline (absolute in .document-meta area) */
  .copy-feedback { position: absolute; top: -40px; left: 0; background: var(--success-color); color: #fff; padding: var(--spacing-sm) var(--spacing-md); border-radius: var(--radius-lg); font-size: var(--font-size-sm); opacity: 0; transform: translateY(10px) scale(0.8); transition: all 0.3s cubic-bezier(0.68,-0.55,0.265,1.55); pointer-events: none; z-index: 1000; }
  .copy-feedback.show { opacity: 1; transform: translateY(0) scale(1); }
  .copy-feedback::before { content: "✓"; margin-right: var(--spacing-xs); font-weight: bold; }

  /* Spinner */
  .enhanced-spinner { width: 40px; height: 40px; border: 4px solid var(--border-light); border-top: 4px solid var(--primary-color); border-radius: 50%; animation: spin 1s linear infinite; }
  .enhanced-spinner--lg { width: 60px; height: 60px; border-width: 6px; }
  @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

  /* Footer */
  footer { font-family: var(--font-family-primary); z-index: 1000 !important; }
  footer.bg-dark { z-index: 1001 !important; position: fixed !important; bottom: 0 !important; left: 0 !important; right: 0 !important; width: 100% !important; background: var(--gray-100) !important; color: var(--text-secondary) !important; }
  footer.bg-dark a { color: var(--primary-800) !important; }
  :root[data-theme="dark"] footer.bg-dark a { color: var(--primary-700) !important; }

  /* Scrollbars */
  .enhanced-sidebar::-webkit-scrollbar,
  .document-viewer::-webkit-scrollbar { width: 6px; }
  .enhanced-sidebar::-webkit-scrollbar-track,
  .document-viewer::-webkit-scrollbar-track { background: var(--secondary-color); border-radius: 3px; }
  .enhanced-sidebar::-webkit-scrollbar-thumb,
  .document-viewer::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; transition: background 0.3s ease; }
  .enhanced-sidebar::-webkit-scrollbar-thumb:hover,
  .document-viewer::-webkit-scrollbar-thumb:hover { background: var(--primary-color); }

  /* =============================
     RESPONSIVE (SPECIAL PROCEDURES)
     ============================= */
  @media (max-width: 768px) {
    .enhanced-sidebar { transform: translateX(-100%); width: 85%; box-shadow: 0 0 20px rgba(0,0,0,0.3); }
    .enhanced-sidebar.active { transform: translateX(0); }
    .enhanced-main { margin-left: 0; padding: var(--spacing-md); }
    .sidebar-toggle { display: flex; }
    .document-search-container { margin-top: 0; padding: var(--spacing-md); }
    .document-viewer { padding: var(--spacing-lg); }
    .document-content { padding: var(--spacing-lg); }
    .document-meta { padding: var(--spacing-md); }
    /* Ensure page content clears fixed navbar on mobile */
    body { padding-top: var(--navbar-height); }
  }

  @media (max-width: 576px) {
    .hero-title { font-size: var(--font-size-2xl); }
    .hero-subtitle { font-size: var(--font-size-base); }
    .search-container { padding: var(--spacing-md); }
    .feature-card { padding: var(--spacing-lg); }
    .feature-icon { font-size: var(--font-size-3xl); }
    .form-control { font-size: 16px; }
    .navbar-nav .nav-link { padding: var(--spacing-md) var(--spacing-lg) !important; min-height: 44px; display: flex; align-items: center; }
    .document-search-container, .document-viewer { padding: var(--spacing-md); }
    .document-content { padding: var(--spacing-md); }
    footer { font-size: 0.75rem; }
  }

  /* Hover surface harmonization */
  .navbar-nav .nav-link:hover,
  .dropdown-item:hover,
  .btn-minimal:hover,
  .feature-card:hover,
  .development-item:hover { background: var(--primary-light) !important; }

  /* --- Desktop hover menus: keep them open while moving the cursor --- */
  @media (min-width: 992px) {
    /* 1) Remove the hover gap */
    .navbar .dropdown-menu {
      margin-top: 0;              /* kills the invisible gap that causes flicker */
    }

    /* 2) Open on hover, not click */
    .navbar .nav-item.dropdown:hover > .dropdown-menu {
      display: block;
    }

    /* 3) Keep it open while hovering the menu itself */
    .navbar .dropdown-menu:hover,
    .navbar .dropdown-menu:focus-within {
      display: block;
    }

    /* 4) Make the parent link look active when open */
    .navbar .nav-item.dropdown:hover > .nav-link {
      background: var(--primary-light);
      color: var(--primary-color) !important;
    }

    /* --- Multi-level submenu support (Bootstrap-like structure) --- */
    .navbar .dropdown-submenu {
      position: relative;
    }
    .navbar .dropdown-submenu > .dropdown-menu {
      top: 0;
      left: 100%;
      margin-top: -1px;           /* aligns edges tightly; avoids micro-gap */
      margin-left: 0;             /* no lateral gap */
    }
    .navbar .dropdown-submenu:hover > .dropdown-menu,
    .navbar .dropdown-submenu:focus-within > .dropdown-menu {
      display: block;
    }
  }

  /* =============================
     MOBILE DOCUMENTS FAB + PANEL
     (shared across viewers)
     ============================= */

  /* FAB button */
  .documents-fab {
    display: none;
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 150px;
    height: 56px;
    background: #009edb; /* same as corpus_viewer.html */
    color: #fff;
    border: none;
    border-radius: 28px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    font-size: 11px;
    font-weight: 500;
    z-index: 1050;
    transition: all 0.2s ease;
    cursor: pointer;
    align-items: center;
    justify-content: flex-start;
    gap: 12px;
    padding: 8px 8px 8px 16px;
  }
  .documents-fab:hover {
    background: #007bb8;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.2);
  }
  .documents-fab:active {
    transform: translateY(0);
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  }
  .documents-fab .fab-icon { font-size: 16px; flex-shrink: 0; }
  .documents-fab .fab-text { display: flex; flex-direction: column; align-items: flex-start; line-height: 1.1; text-align: left; flex: 1; min-width: 0; }
  .documents-fab .fab-treaty-body { font-size: 10px; opacity: 0.9; font-weight: 400; margin-bottom: 1px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 100%; width: 100%; }
  .documents-fab .fab-count { font-size: 11px; font-weight: 600; white-space: nowrap; }

  /* Mobile overlay panel */
  .mobile-documents-panel {
    display: none;
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 1060;
    backdrop-filter: blur(4px);
  }
  .mobile-documents-content {
    position: absolute; bottom: 0; left: 0; right: 0;
    height: 80vh;
    background: #ffffff;
    border-radius: var(--radius-xl) var(--radius-xl) 0 0;
    padding: var(--spacing-xl); /* same as --space-6 scale */
    overflow-y: auto;
    animation: udsSlideUp 0.3s ease-out;
  }
  @keyframes udsSlideUp { from { transform: translateY(100%);} to { transform: translateY(0);} }

  .mobile-panel-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: var(--spacing-xl);
    padding-bottom: var(--spacing-lg);
    border-bottom: 1px solid var(--gray-200);
  }
  .mobile-panel-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--gray-900);
    margin: 0;
  }
  .mobile-panel-close {
    background: none; border: none; font-size: var(--font-size-xl);
    color: var(--gray-500); cursor: pointer;
    padding: var(--spacing-sm); border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
  }
  .mobile-panel-close:hover { background: var(--gray-100); color: var(--gray-700); }

  /* Select + lists inside panel */
  .mobile-committee-selector { margin-bottom: var(--spacing-xl); }
  .mobile-committee-selector select {
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md);
    border: 1px solid var(--gray-300);
    border-radius: var(--radius-lg);
    background: #fff;
    font-family: var(--font-family-primary);
    font-size: var(--font-size-base);
    color: var(--gray-900);
    cursor: pointer;
    transition: all var(--transition-fast);
  }
  .mobile-committee-selector select:focus {
    outline: none; border-color: var(--primary-500); box-shadow: 0 0 0 3px var(--primary-100);
  }

  .mobile-documents-section { margin-top: var(--spacing-lg); }
  .mobile-documents-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--gray-900);
    margin-bottom: var(--spacing-lg);
    display: flex; align-items: center; gap: var(--spacing-sm);
    padding-bottom: var(--spacing-sm);
    border-bottom: 1px solid var(--gray-200);
  }
  .mobile-document-list { list-style: none; padding: 0; margin: 0; }
  .mobile-document-list li { margin-bottom: var(--spacing-md); }
  .mobile-document-list a {
    display: block; padding: var(--spacing-lg);
    color: var(--gray-700); text-decoration: none;
    border-radius: var(--radius-lg);
    transition: all var(--transition-fast);
    font-size: var(--font-size-base);
    line-height: var(--line-height-tight);
    border: 1px solid var(--gray-200);
    background: #fff;
  }
  .mobile-document-list a:hover {
    background-color: var(--primary-50);
    color: var(--primary-700);
    border-color: var(--primary-200);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
  }
  .mobile-document-list a.active {
    background-color: var(--primary-600);
    color: #fff;
    border-color: var(--primary-600);
    font-weight: var(--font-weight-medium);
    box-shadow: var(--shadow-sm);
  }

  /* Dark mode adjustments */
  :root[data-theme="dark"] .mobile-documents-content { background: var(--gray-200); }
  :root[data-theme="dark"] .mobile-committee-selector select {
    background: var(--gray-300); border-color: var(--gray-400); color: var(--gray-900);
  }
  :root[data-theme="dark"] .mobile-document-list a {
    background: var(--gray-300); border-color: var(--gray-400); color: var(--gray-900);
  }
  :root[data-theme="dark"] .mobile-document-list a:hover {
    background-color: var(--primary-700); color: #fff; border-color: var(--primary-700);
  }
  :root[data-theme="dark"] .mobile-panel-close:hover { background: var(--gray-400); color: var(--gray-900); }

  /* Reveal FAB on small screens, add space in viewer */
  @media (max-width: 768px) {
    .documents-fab { display: flex !important; }
    .document-viewer { padding-bottom: 120px; } /* room for FAB */
    .enhanced-sidebar { transform: translateX(-100%); }
    .enhanced-sidebar.active { transform: translateX(0); }
  }