/* ===========================================================================
   VARIABLES & GLOBALS
   =========================================================================== */
:root {
  /* Primary palette */
  --primary:           #0073cf;  /* UN Blue */
  --primary-light:     #5b7aa9;
  --primary-dark:      #005ea2;
  --accent:            #cc0099;

  /* Neutrals */
  --bg:                #f9f9f9;
  --surface:           #ffffff;
  --surface-alt:       #f4f5f7;
  --border:            #e0e0e0;
  --text:              #333333;
  --text-light:        #f9f9f9;

  /* Typography */
  --font-base:         'Open Sans', sans-serif;
  --font-weight-base:  300;
  --line-height:       1.5;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 0;
  font-family: var(--font-base);
  font-weight: var(--font-weight-base);
  line-height: var(--line-height);
  color: var(--text);
  background-color: var(--bg);
  transition: background-color .3s, color .3s;
  padding-top: 60px;   /* for fixed navbar */
  margin-bottom: 60px; /* for fixed footer */
}

/* Remove big underline from home page H1 */
body:not(.search-results-page) h1 {
  border-bottom: none;
  padding-bottom: 0;
  margin-bottom: 1rem;
}

/* Links */
a {
  color: var(--primary);
  text-decoration: none;
  transition: color .2s;
}
a:hover {
  text-decoration: underline;
  color: var(--primary-dark);
}

/* ===========================================================================
   NAVBAR
   =========================================================================== */
.navbar {
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 1030;
  background-color: var(--primary-light) !important;
  border-bottom: 1px solid var(--border);
  opacity: .95;
  font-weight: 600;
}

.navbar .navbar-brand,
.navbar .nav-link {
  color: white !important;
}

.navbar .nav-link:hover {
  color: #c3d1f7 !important;
}

.navbar-toggler {
  border: none;
  font-size: 1.25rem;
  color: white !important;
  margin-left: auto; /* mobile: push toggler right */
}

/* ===========================================================================
   FOOTER
   =========================================================================== */
footer {
  position: fixed;
  bottom: 0;
  width: 100%;
  background-color: var(--surface);
  border-top: 1px solid var(--border);
  text-align: center;
  padding: .5rem 0;
  font-size: .75rem;
  color: #555;
}

/* ===========================================================================
   TYPOGRAPHY
   =========================================================================== */
h1 {
  font-size: 2rem;
  color: var(--primary);
  border-bottom: 2px solid var(--border);
  padding-bottom: .5rem;
  margin-bottom: 1.5rem;
}

h2 {
  color: var(--primary);
  margin-top: 1.5rem;
  margin-bottom: .75rem;
}

/* ===========================================================================
   FORMS & INPUTS
   =========================================================================== */
.form-control {
  border-radius: .25rem;
  transition: border-color .2s, box-shadow .2s;
}

.form-control:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 .2rem rgba(0,115,207,.25);
}

.input-group {
  width: 100%;
}

.input-group .btn {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}

.btn {
  font-weight: 600;
  transition: background-color .2s, color .2s;
}

/* Primary button */
.btn-primary {
  background-color: var(--primary);
  border: none;
  color: white;
}
.btn-primary:hover {
  background-color: var(--primary-dark);
}

/* Outline style (for toggles) */
.btn-outline-primary {
  border-color: var(--primary);
  color: var(--primary);
}
.btn-outline-primary:hover {
  background-color: var(--primary);
  color: white;
}

/* ===========================================================================
   ADVANCED FILTERS COLLAPSE PATCH
   =========================================================================== */
/* Rotate slider icon when open */
[data-toggle="collapse"] i {
  transition: transform .3s ease;
}
#advancedFilters.show + [data-toggle="collapse"] i,
[data-toggle="collapse"][aria-expanded="true"] i {
  transform: rotate(180deg);
}

/* Spacing around collapse panel */
#advancedFilters {
  margin-top: 1rem;
}
#advancedFilters .card-body {
  padding: 1.25rem;
  background-color: var(--surface);
  border-radius: .25rem;
  border: 1px solid var(--border);
}

/* Filter panel layout */
.filter-panel {
  display: flex;
  gap: 1rem;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: .5rem;
  padding: 1rem;
}

/* Each column */
.filter-group {
  flex: 1;
  display: flex;
  flex-direction: column;
}

/* Column labels */
.filter-group > label {
  margin-bottom: .5rem;
  font-weight: 600;
  color: var(--text);
}

/* Concerned groups select: scroll safely */
.filter-group select {
  min-height: 120px;
  max-height: 200px;
  overflow-y: auto;
}

/* Container for checkbox lists */
.filter-checkbox-list {
  max-height: 200px;
  overflow-y: auto;
  background-color: var(--surface);
  border: 1px solid var(--border);
  border-radius: .25rem;
  padding: .5rem;
}

/* Treaty body container share same style */
.treaty-body-container {
  max-height: 200px;
  overflow-y: auto;
  padding: .5rem;
  border: 1px solid var(--border);
  border-radius: .25rem;
  background: var(--surface-alt);
}

/* Year inputs: stacked on mobile, side-by-side on desktop */
.year-range {
  display: flex;
  flex-direction: column;
  gap: .5rem;
}
.year-range input {
  width: 100%;
}
@media(min-width: 576px) {
  .year-range {
    flex-direction: row;
  }
  .year-range input + input {
    margin-left: .5rem;
  }
}

/* Style the year inputs so they’re clearly visible */
#advancedFilters .form-control[type="number"] {
  border: 1px solid #ccc;
  background-color: #fff;
  padding: 0.4rem 0.75rem;
  text-align: center;
}

/* Tweak the toggle button color */
.btn-link {
  color: var(--primary);
}
.btn-link:hover {
  color: var(--primary-dark);
  text-decoration: none;
}

/* ===========================================================================
   CARDS & SEARCH RESULTS
   =========================================================================== */
.card {
  background: var(--surface);
  border: none;
  border-radius: .5rem;
  box-shadow: 0 2px 4px rgba(0,0,0,.1);
  margin: 1rem;
}

.card-header {
  background: var(--surface-alt);
  border-bottom: 1px solid var(--border);
  font-weight: 600;
  padding: .75rem 1rem;
}

.result-item {
  position: relative;
  padding: 1rem;
  border-bottom: 1px solid var(--border);
  background: var(--surface);
}

.result-item:nth-child(odd) {
  background: var(--bg);
}

/* Copy & link icons */
.link-icon,
.copy-btn {
  position: absolute;
  top: .75rem;
  right: .75rem;
  font-size: 1rem;
  color: var(--primary);
  transition: color .2s;
}
.copy-btn {
  background: none;
  border: none;
  cursor: pointer;
}
.link-icon:hover,
.copy-btn:hover {
  color: var(--primary-dark);
}

/* Tooltip for copy */
.copy-tooltip {
  display: none;
  position: absolute;
  top: -1.5rem;
  right: 0;
  background: var(--text);
  color: var(--text-light);
  padding: .25rem .5rem;
  font-size: .75rem;
  border-radius: .25rem;
}

/* ===========================================================================
   HIGHLIGHTS
   =========================================================================== */
.highlight {
  background-color: var(--primary);
  color: white !important;
  padding: 0 .2rem;
  border-radius: .15rem;
}

.highlight-dynamic {
  background-color: var(--accent);
  color: white !important;
  padding: 0 .2rem;
  border-radius: .15rem;
}

/* ===========================================================================
   ANALYTICS PANEL
   =========================================================================== */
.analytics-toggle-button {
  background: none;
  border: 1px solid var(--primary);
  color: var(--primary);
  border-radius: .25rem;
  padding: .5rem 1rem;
}
.analytics-toggle-button.active {
  background: var(--primary);
  color: white;
}

.analytics-container {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  visibility: hidden;
  transition: max-height .3s ease, opacity .3s ease;
  margin: 1rem auto;
  background: var(--surface-alt);
  border-radius: .25rem;
  padding: 0 .5rem;
}
.analytics-container.visible {
  max-height: 500px;
  opacity: 1;
  visibility: visible;
}

.analytics-header {
  font-size: 1.25rem;
  margin-bottom: .5rem;
}

/* ===========================================================================
   SEARCH ICON STYLES
   =========================================================================== */
.search-icon {
  color: inherit;
  cursor: pointer;
}
.search-icon:hover {
  color: #6c757d;
}

/* ===========================================================================
   SCROLL TO TOP BUTTON
   =========================================================================== */
#scrollToTopBtn {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: 999;
  border: none;
  outline: none;
  background: rgba(0,0,0,.5);
  color: white;
  padding: .5rem;
  border-radius: .25rem;
  font-size: 1rem;
  display: none;
  cursor: pointer;
}
#scrollToTopBtn:hover {
  background: rgba(0,0,0,.7);
}

/* ===========================================================================
   RESPONSIVE ADJUSTMENTS
   =========================================================================== */
@media (min-width: 992px) {
  /* Wider search bar on desktop */
  #searchForm .input-group {
    max-width: 800px;
    margin: auto;
  }
}

@media (max-width: 767px) {
  /* Mobile navbar link padding */
  .navbar-nav .nav-link {
    padding: .5rem 1rem !important;
  }
  /* Stack filter panel */
  .filter-panel {
    flex-direction: column;
  }
}

/* ===========================================================================
   DARK MODE
   =========================================================================== */
body.dark-mode {
  background: #222;
  color: #ddd;
}

body.dark-mode a,
body.dark-mode .nav-link {
  color: #ddd !important;
}
body.dark-mode a:hover {
  color: var(--accent) !important;
}

/* Inputs in dark mode */
body.dark-mode .form-control {
  background: #333;
  color: #eee;
  border-color: #555;
}
body.dark-mode .form-control:focus {
  box-shadow: 0 0 0 .2rem rgba(204,9,153,.25);
}

/* Buttons in dark mode */
body.dark-mode .btn-primary {
  background: #ddd;
  color: #222;
}
body.dark-mode .btn-primary:hover {
  background: var(--accent);
  color: white;
}

/* Cards in dark mode */
body.dark-mode .card,
body.dark-mode .card-header,
body.dark-mode .result-item {
  background: #2a2a2a;
  border-color: #444;
}

/* Tooltip in dark mode */
body.dark-mode .copy-tooltip {
  background: #eee;
  color: #222;
}

/* Scroll-to-top in dark mode */
body.dark-mode #scrollToTopBtn {
  background: rgba(255,255,255,.5);
  color: #222;
}
body.dark-mode #scrollToTopBtn:hover {
  background: rgba(255,255,255,.7);
}

/* ===========================================================================
   ADVANCED FILTERS – DARK MODE UPDATES
   =========================================================================== */
body.dark-mode {
  /* override the panel container */
  --filter-bg:    #2a2a2a;
  --filter-alt:   #212121;
  --filter-border:#444;
  --filter-text:  #e0e0e0;
  --input-bg:     #212121;
  --input-border: #555;
}

/* Filter panel background & border */
body.dark-mode .filter-panel {
  background: var(--filter-bg);
  border-color: var(--filter-border);
}

/* Column labels (Concerned groups, Special Procedures, Years) */
body.dark-mode .filter-group > label {
  color: var(--filter-text);
}

/* The multi-select box and scrollable checkbox list */
body.dark-mode .filter-group select,
body.dark-mode .filter-checkbox-list {
  background: var(--input-bg);
  color: var(--filter-text);
  border: 1px solid var(--input-border);
}

/* Treaty bodies container */
body.dark-mode .treaty-body-container {
  background: var(--input-bg);
  border-color: var(--input-border);
}

/* Number inputs for years */
body.dark-mode .year-range input {
  background: var(--input-bg);
  color: var(--filter-text);
  border: 1px solid var(--input-border);
}

/* Scrollbars (WebKit) inside these scrollable areas */
body.dark-mode .filter-panel select::-webkit-scrollbar,
body.dark-mode .filter-checkbox-list::-webkit-scrollbar,
body.dark-mode .treaty-body-container::-webkit-scrollbar {
  width: 8px;
}
body.dark-mode .filter-panel select::-webkit-scrollbar-track,
body.dark-mode .filter-checkbox-list::-webkit-scrollbar-track,
body.dark-mode .treaty-body-container::-webkit-scrollbar-track {
  background: var(--filter-bg);
}
body.dark-mode .filter-panel select::-webkit-scrollbar-thumb,
body.dark-mode .filter-checkbox-list::-webkit-scrollbar-thumb,
body.dark-mode .treaty-body-container::-webkit-scrollbar-thumb {
  background-color: var(--input-border);
  border-radius: 4px;
}

/* Keep the “Advanced filters” toggle link in accent blue */
body.dark-mode .btn-link {
  color: var(--primary) !important;
}
body.dark-mode .btn-link:hover {
  color: var(--primary-dark) !important;
}

/* Ensure high-contrast focus states */
body.dark-mode .filter-group select:focus,
body.dark-mode .year-range input:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(204,9,153, .5);
  border-color: var(--accent);
}
